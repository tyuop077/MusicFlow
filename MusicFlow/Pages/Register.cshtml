@page
@model MusicFlow.Pages.RegisterModel
@{ViewData["Title"] = "Register - MusicFlow";}
<link rel="stylesheet" href="~/css/auth.css" />
<div class="AuthPage">
    <form class="AuthContainer" id="auth" method="post">
        <h1>Register</h1>
        <input class="TextInput" type="email" name="email" placeholder="Email" />
        <input class="TextInput" type="text" name="username" placeholder="Username" title="Only alphanumeric characters, symbols (underscore and dot), no symbols at the start & end, symbols can't be usedmultiple times in a row, not less, than 3 characters" />
        <input class="TextInput" type="password" name="password" placeholder="Password" />
        <input class="TextInput" type="password" name="password2" placeholder="Repeat password" />
        <p id="tooltip" />
        <div class="FormButtonLine">
            <input class="FormButton" type="submit" value="Sign up" />
        </div>
        <p>Have an account? <a href="/register">Sign in here</a></p>
    </form>
</div>

<script>
    $("#auth").submit(e => {
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "register",
            dataType: "json",
            data: $("#auth").serialize(),
            success: data => {
                console.log(data);
                if (data.success) window.location.href = "/";
                $("#tooltip").text(data.error)
            }
        });
    });
</script>